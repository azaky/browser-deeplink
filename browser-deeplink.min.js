/**
 * browser-deeplink v0.2
 *
 * Author: Ahmad Zaky
 * GitHub: http://github.com/azaky/browser-deeplink
 *
 * Forked from: http://github.com/hampusohlsson/browser-deeplink
 * and also including some works from https://github.com/mderazon/node-deeplink
 *
 * MIT License
 */
!function(a,b){"function"==typeof define&&define.amd?define("deeplink",b(a)):"object"==typeof exports?module.exports=b(a):a.deeplink=b(a)}(window||this,function(a){"use strict";if(!a.document||!a.navigator)throw new Error("browser-deeplink will not work without DOM or       user-agent");var c={},d={iOS:{},android:{},androidDisabled:!1,delay:1e3,delayIOS:3e3},f=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},g=function(){var a="http://itunes.com/app/",b=c.iOS.appName;return b?a+b:null},h=function(){var a="market://details?id=",b=c.android.appId;return b?a+b:null},j=function(){return navigator.userAgent.match("Android")},k=function(){return navigator.userAgent.match("iPad")||navigator.userAgent.match("iPhone")||navigator.userAgent.match("iPod")},l=function(){return j()||k()},m=function(a){c=f(d,a),j()&&(c.platform="android"),k()&&(c.platform="ios")},n=function(a){if("string"!=typeof a)return!1;var b=a.match(/([^:]+):\/\/(.+)$/i);return b?{scheme:b[1],link:b[2]}:!1},o=function(a,b){var c=n(a);return c?"intent://"+c.link+"#Intent;scheme="+c.scheme+";package="+b+";end":!1},p=function(a,b){m(a),"function"!=typeof b&&(b=function(){}),l()?j()?r()||b():k()&&(q()||b()):b()},q=function(){var a=c.url;if(c.delayIOS&&(c.delay=c.delayIOS),"string"==typeof c.method){if("direct"===c.method)s(a);else if("webkit"===c.method)t(a,g());else{if("iframe"!==c.method)throw new Error("unknown method: "+c.method);u(a,g())}return!0}return navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Safari/)&&navigator.userAgent.match(/(Version\/9)|(OS 9)/)?t(a,g()):u(a,g()),!0},r=function(){var a=c.url;if(navigator.userAgent.match(/OPR|Opera/))return document.location=h(),!0;if((!navigator.userAgent.match(/OPR|Opera/)&&navigator.userAgent.match(/Chrome|Firefox|Safari/)||c.intent)&&(a=o(a,c.android.appId),!a))return!1;if("string"==typeof c.method){if("direct"===c.method)s(a);else if("webkit"===c.method)t(a,h());else{if("iframe"!==c.method)throw new Error("unknown method: "+c.method);u(a,h())}return!0}return navigator.userAgent.match(/Chrome/)?s(a):u(a,h()),!0},s=function(a,b){document.location=a},t=function(a,b){document.location=a,setTimeout(function(){document.location=b},c.delay)},u=function(a,b){var d=document.createElement("iframe"),e=setTimeout(function(){document.location=b},c.delay);d.onload=function(){clearTimeout(e),d.parentNode.removeChild(d),window.location.href=uri},d.src=a,d.style.display="none",document.body.appendChild(d)};return p});
